<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Python Idioms</title>
    <meta name="author" content="Ha-Duong Nguyen" />
    <meta name="description" content="thoughts & rants on tech & language, by cmpitg" />
    <link rel="canonical" href="http://reference-error.org//python/" />
    <!-- <link href="//fonts.googleapis.com/css?family=Nunito:400,700,300|Varela+Round" rel="stylesheet" type="text/css"> -->
    <link href="//fonts.googleapis.com/css?family=Alegreya+Sans|Ubuntu+Mono" rel="stylesheet">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="alternate" type="application/rss+xml" title="Reference Error" href="/atom.xml" />
    <link rel="stylesheet" href="/css/site.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
        ga('create', ', 'auto');
        ga('send', 'pageview');
    </script>
  </head>
  <body>
    <section>
      <header class="navigation">
        <div id="header-title">
          <a href="/" class="logo" title="Reference Error">
            Reference Error
      </a>
        </div>
        <div id="social-links-header">
          <a title="cmpitg @ github" href="https://github.com/cmpitg"><i class="fa fa-github-square"></i></a>
          <a title="cmpitg @ linkedin" href="https://fi.linkedin.com/in/cmpitg"><i class="fa fa-linkedin-square"></i></a>
          <a title="cmpitg @ twitter" href="https://twitter.com/cmpitg"><i class="fa fa-twitter-square"></i></a>
        </div>
        <nav>
          <ul>
            <li><a href="/logs">logs</a></li>
            <li><a href="/writing">writing</a></li>
            <li><a href="/talks">talks</a></li>
            <li><a href="/about">about</a></li>
            <li class="no-bullet"><a href="/atom.xml">rss</a></li>
          </ul>
        </nav>
      </header>
      <article>
        <h1 class="title">
          Python Idioms
  </h1>
        <p class="subtitle">
          <span>
            Series:
          
            
              <a href="/#python">python</a>,
            
          
            
              <a href="/#guide">guide</a>
          </span>
          <span class="date">
          </span>
        </p>
        <div id="post">
          <p><strong>Supported Python version/implementation</strong>:
            <a href="http://en.wikipedia.org/wiki/Cpython">CPython</a>
            <a href="http://en.wikipedia.org/wiki/Py3k#Version_3.0">3+</a></p>
          <h2 id="notes">Notes</h2>
          <ul>
            <li>
              <p>I like Python to some extent, mostly for its relatively clean syntax,
healthy community, practical uses, and well-supported in the <em>desktop</em> land.</p>
            </li>
            <li>
              <p>I don’t like Python for its unconventional and inconsistent naming
convention, especially conflict naming conventions in the standard library,
broken syntax, limited supported for
                <a href="http://stackoverflow.com/questions/1017621/why-isnt-python-very-good-for-functional-programming">functional programming practice</a>
                (thanks to
                <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=98196">Guido</a>’s
                <a href="http://en.wikipedia.org/wiki/Benevolent_Dictator_For_Life"><em>dictatorship</em></a>,
half-ass OOP (can you <em>ever</em> be able to do <code class="highlighter-rouge">1.to_str()</code>?), …), …</p>
            </li>
            <li>
              <p>Forget what I love and hate about Python, use it and have fun!</p>
            </li>
            <li>
              <p>Good way to call <a href="http://ipython.org/">IPython</a> is to use it with
                <code class="highlighter-rouge">qtconsole</code>, i.e. <code class="highlighter-rouge">ipython3 qtconsole</code>.</p>
            </li>
          </ul>
          <h2 id="not-so-faqs">(Not-so) FAQs</h2>
          <h3 id="classmethod-vs-staticmethod"><code class="highlighter-rouge">classmethod</code> vs. <code class="highlighter-rouge">staticmethod</code></h3>
          <p>Stackoverflow question:
            <a href="http://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod-in-python">What is the difference between @staticmethod and @classmethod in Python?</a></p>
          <ul>
            <li><code class="highlighter-rouge">staticmethod</code>:
    
              <ul>
                <li>knows nothing about the class or instance,</li>
                <li>basically useless, could completely be replaced by module function</li>
              </ul>
            </li>
            <li><code class="highlighter-rouge">classmethod</code>:
    
              <ul>
                <li>gets passed the class or instance it was called on,</li>
              </ul>
            </li>
          </ul>
          <h3 id="decorator-explanation">Decorator explanation</h3>
          <p>A decorator is <strong>a callable</strong> that <strong>takes a function</strong> as an argument and
            <strong>returns a replacement function</strong>.  This is best illustrated with the
following code snippet:</p>
          <div class="language-python highlighter-rouge">
            <pre class="highlight"><code><span class="c">#</span>
<span class="c"># function()</span>
<span class="c"># -&gt; replacement()</span>
<span class="c">#</span>

<span class="k">print</span><span class="p">(</span><span class="s">"Case #1: function() -&gt; replacement()"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">a_decorator</span><span class="p">(</span><span class="n">a_func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">replacement</span><span class="p">():</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">a_func</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Result before decorated: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ret</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">replacement</span>


<span class="nd">@a_decorator</span>
<span class="k">def</span> <span class="nf">just_return_1</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">1</span>


<span class="k">print</span><span class="p">(</span><span class="s">"Result after decorated: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">just_return_1</span><span class="p">()))</span>

<span class="c">#</span>
<span class="c"># function(an_arg)</span>
<span class="c"># -&gt; replacement()</span>
<span class="c">#</span>

<span class="k">print</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Case #2: function(an_arg) -&gt; replacement()"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">one_becomes_zero_decorator</span><span class="p">(</span><span class="n">a_func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">replacement</span><span class="p">():</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">a_func</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"No more argument, a_func(10) is called."</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>
    <span class="k">return</span> <span class="n">replacement</span>


<span class="nd">@one_becomes_zero_decorator</span>
<span class="k">def</span> <span class="nf">just_return_x</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span>


<span class="k">print</span><span class="p">(</span><span class="s">"Result after decorated: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">just_return_x</span><span class="p">()))</span>

<span class="c">#</span>
<span class="c"># function(an_arg)</span>
<span class="c"># -&gt; replacement(same_arg)</span>
<span class="c">#</span>

<span class="k">print</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Case #3: function(an_arg) -&gt; replacement(same_arg)"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">keeping_argument_decorator</span><span class="p">(</span><span class="n">a_func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">replacement</span><span class="p">(</span><span class="n">same_arg</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">a_func</span><span class="p">(</span><span class="n">same_arg</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Result before decorated: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ret</span> <span class="o">-</span> <span class="mi">100</span>
    <span class="k">return</span> <span class="n">replacement</span>


<span class="nd">@keeping_argument_decorator</span>
<span class="k">def</span> <span class="nf">just_return_x_squared</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>


<span class="k">print</span><span class="p">(</span><span class="s">"Result after decorated: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">just_return_x_squared</span><span class="p">(</span><span class="mi">20</span><span class="p">)))</span>
</code></pre>
          </div>
          <h3 id="how-to-install-python-3-version-of-package-via-pip">How to install Python 3 version of package via <code class="highlighter-rouge">pip</code></h3>
          <p>From
            <a href="http://stackoverflow.com/questions/10763440/how-to-install-python3-version-of-package-via-pip/17266254#17266254">my answer at Stack Overflow</a>:</p>
          <ul>
            <li>
              <p>Install <code class="highlighter-rouge">setuptools</code> for Python 3 in case it’s not installed yet.  For Debian-based:</p>
              <div class="language-sh highlighter-rouge">
                <pre class="highlight"><code>sudo aptitude install python3-setuptools

<span class="c"># or</span>
su -c <span class="s1">'aptitude install python3-setuptools'</span> -

<span class="c"># or</span>
sudo apt-get install python3-setuptools
</code></pre>
              </div>
            </li>
            <li>
              <p>With Python 2.4+, <code class="highlighter-rouge">easy_install</code> could be invoked with specific Python
version by <code class="highlighter-rouge">python -m easy_install</code>, so <code class="highlighter-rouge">pip</code> for Python 3 could be
installed by:</p>
              <div class="language-sh highlighter-rouge">
                <pre class="highlight"><code>sudo python3 -m easy_install pip

<span class="c"># or</span>
su -c <span class="s1">'python3 -m easy_install pip'</span> -
</code></pre>
              </div>
            </li>
            <li>
              <p>Now you got <code class="highlighter-rouge">pip</code> 3, invoke it with its specific version, e.g.</p>
              <div class="language-sh highlighter-rouge">
                <pre class="highlight"><code>sudo pip-3.2 install pygments

<span class="c"># or</span>
su -c <span class="s1">'pip-3.2 install pygments'</span> -
</code></pre>
              </div>
            </li>
          </ul>
          <h3 id="fully-install-pil-in-virtualenv">Fully install PIL in <code class="highlighter-rouge">virtualenv</code></h3>
          <p>PIL (Python Image Library) fails to detect some image processing libraries in
some systems when being installed inside a <code class="highlighter-rouge">virtualenv</code>.  This is due to
non-standard library location (they are stored in
            <code class="highlighter-rouge">/usr/lib/&lt;your-arch&gt;-linux-gnu/&lt;library-name&gt;.so</code> instead of <code class="highlighter-rouge">/usr/lib/</code>).
The fix is simple and straightforward thanks to
            <a href="http://goo.gl/NOZtUu">StackOverflow</a>.</p>
          <p>The following script works for Debian-based systems with <code class="highlighter-rouge">aptitude</code> installed,
thus you might need to adjust the paths or command a bit if you use a
different one.</p>
          <div class="language-sh highlighter-rouge">
            <pre class="highlight"><code>sudo aptitude install libjpeg-dev

sudo ln -s /usr/lib/x86_64-linux-gnu/libjpeg.so /usr/lib
sudo ln -s /usr/lib/x86_64-linux-gnu/libfreetype.so /usr/lib
sudo ln -s /usr/lib/x86_64-linux-gnu/libz.so /usr/lib

pip install -I PIL
</code></pre>
          </div>
          <h2 id="idioms">Idioms</h2>
          <h3 id="reimplement-hash-and-eq">Reimplement <code class="highlighter-rouge">__hash__</code> and <code class="highlighter-rouge">__eq__</code></h3>
          <p>Purpose: to make the object hashable and <code class="highlighter-rouge">==</code>-able.</p>
          <p>An easy and correct (though not efficient) way to implement them is to make use of tuple:</p>
          <div class="language-python highlighter-rouge">
            <pre class="highlight"><code><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attr1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attr2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attr3</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">__key</span><span class="p">()</span> <span class="o">==</span> <span class="n">y</span><span class="o">.</span><span class="n">__key</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">())</span>
</code></pre>
          </div>
          <p>To hash a <code class="highlighter-rouge">dict</code>, one way is to use <code class="highlighter-rouge">frozenset</code>:</p>
          <div class="language-python highlighter-rouge">
            <pre class="highlight"><code><span class="n">d</span> <span class="o">=</span> <span class="p">{</span> <span class="s">"a"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"b"</span><span class="p">:</span> <span class="mi">2</span> <span class="p">}</span>
<span class="n">some_dict</span><span class="p">[</span><span class="nb">frozenset</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()))]</span> <span class="o">=</span> <span class="mi">10</span>
</code></pre>
          </div>
          <h3 id="loading-a-python-file">Loading a Python file</h3>
          <ul>
            <li>
              <p>The most obvious way is to <code class="highlighter-rouge">exec</code> the content of the file you want to load,
                <code class="highlighter-rouge">execfile</code> was there in Python 2 but is removed in Python 3+, so:</p>
              <div class="language-python highlighter-rouge">
                <pre class="highlight"><code><span class="k">def</span> <span class="nf">load_file</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">globals</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">locals</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
   <span class="s">"""Load a Python script."""</span>
   <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">script</span><span class="p">:</span>
       <span class="k">exec</span><span class="p">(</span><span class="nb">compile</span><span class="p">(</span><span class="n">script</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="s">'exec'</span><span class="p">),</span> <span class="nb">globals</span><span class="p">,</span> <span class="nb">locals</span><span class="p">)</span>
</code></pre>
              </div>
            </li>
            <li>
              <p>Another way is to add the file path to <code class="highlighter-rouge">sys.path</code> and use <code class="highlighter-rouge">import</code> as a safe
bet:</p>
              <div class="language-python highlighter-rouge">
                <pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">load_file</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
   <span class="s">"""Import a Python script as a module."""</span>
   <span class="n">dirpart</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
   <span class="n">filepart</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

   <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dirpart</span><span class="p">)</span>
   <span class="k">exec</span><span class="p">(</span><span class="s">"import {0}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filepart</span><span class="p">))</span>
</code></pre>
              </div>
            </li>
          </ul>
          <h3 id="capitalize-a-string">Capitalize a string</h3>
          <div class="language-python highlighter-rouge">
            <pre class="highlight"><code><span class="k">def</span> <span class="nf">capitalize_str</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
    <span class="s">"""Return a copy of the capitalized version of the string."""</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="nb">str</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</code></pre>
          </div>
          <h3 id="adding-classmethod-to-class-dynamically">Adding <code class="highlighter-rouge">classmethod</code> to class dynamically</h3>
          <p>By making use of <code class="highlighter-rouge">getattr</code> and <code class="highlighter-rouge">setattr</code>:</p>
          <div class="language-python highlighter-rouge">
            <pre class="highlight"><code><span class="nb">getattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">'y'</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<span class="nb">setattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">'y'</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">v</span><span class="p">)</span>
</code></pre>
          </div>
          <div class="language-python highlighter-rouge">
            <pre class="highlight"><code><span class="kn">import</span> <span class="nn">types</span>

<span class="k">class</span> <span class="nc">RandomClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_method</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">setattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MethodType</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">cls</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">words</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>


<span class="n">RandomClass</span><span class="o">.</span><span class="n">add_method</span><span class="p">(</span><span class="n">say_hello</span><span class="p">)</span>
<span class="n">RandomClass</span><span class="o">.</span><span class="n">say_hello</span><span class="p">(</span><span class="s">'World from class!'</span><span class="p">)</span>

<span class="n">random_instance</span> <span class="o">=</span> <span class="n">RandomClass</span><span class="p">()</span>
<span class="n">random_instance</span><span class="o">.</span><span class="n">say_hello</span><span class="p">(</span><span class="s">'World from instance!'</span><span class="p">)</span>
</code></pre>
          </div>
          <h3 id="starting-a-repl-programmatically">Starting a REPL programmatically</h3>
          <div class="language-python highlighter-rouge">
            <pre class="highlight"><code><span class="kn">import</span> <span class="nn">readline</span> <span class="c"># optional</span>
<span class="kn">import</span> <span class="nn">code</span>


<span class="nb">vars</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="nb">vars</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">locals</span><span class="p">())</span>
<span class="n">shell</span> <span class="o">=</span> <span class="n">code</span><span class="o">.</span><span class="n">InteractiveConsole</span><span class="p">(</span><span class="nb">vars</span><span class="p">)</span>
<span class="n">shell</span><span class="o">.</span><span class="n">interact</span><span class="p">()</span>
</code></pre>
          </div>
          <h3 id="get-directory-of-current-file">Get directory of current file</h3>
          <p>Source:
http://stackoverflow.com/questions/5137497/find-current-directory-and-files-directory</p>
          <div class="language-python highlighter-rouge">
            <pre class="highlight"><code><span class="kn">import</span> <span class="nn">path</span>


<span class="c"># Path to current file</span>
<span class="k">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>

<span class="c"># Path to directory of current file</span>
<span class="k">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">__file__</span><span class="p">)))</span>
</code></pre>
          </div>
          <h3 id="scripting-and-module">Scripting and module</h3>
          <p>Supposed we have this directory structure:</p>
          <div class="language-python highlighter-rouge">
            <pre class="highlight"><code><span class="n">top_level</span><span class="o">/</span>
   <span class="n">__init__</span><span class="o">.</span><span class="n">py</span>
   <span class="n">say_hello</span><span class="o">.</span><span class="n">py</span>
   <span class="n">main</span><span class="o">.</span><span class="n">py</span>
</code></pre>
          </div>
          <p>With the following code as the content of <code class="highlighter-rouge">say_hello.py</code> and <code class="highlighter-rouge">main.py</code>
            respectively:</p>
          <div class="language-python highlighter-rouge">
            <pre class="highlight"><code><span class="c"># top_level/say_hello.py</span>
<span class="k">def</span> <span class="nf">say_hello_world</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"¡Hola mundo!"</span><span class="p">)</span>

</code></pre>
          </div>
          <div class="language-python highlighter-rouge">
            <pre class="highlight"><code><span class="c"># top_level/main.py</span>
<span class="c">#!/usr/bin/env python</span>
<span class="kn">from</span> <span class="nn">top_level.say_hello</span> <span class="kn">import</span> <span class="n">say_hello_world</span>


<span class="n">say_hello_world</span><span class="p">()</span>

</code></pre>
          </div>
          <p>Then in <code class="highlighter-rouge">top_level/</code>, you execute <code class="highlighter-rouge">main.py</code> as a script:</p>
          <div class="language-sh highlighter-rouge">
            <pre class="highlight"><code>python main.py
</code></pre>
          </div>
          <p>And it happens:</p>
          <div class="highlighter-rouge">
            <pre class="highlight"><code>ImportError: No module named top_level.say_hello
</code></pre>
          </div>
          <p>There are 2 ways to resolve:</p>
          <ul>
            <li>
              <p>Directly call the module with <code class="highlighter-rouge">python -m</code>:</p>
              <div class="language-sh highlighter-rouge">
                <pre class="highlight"><code><span class="c"># Inside top_level/</span>
<span class="nb">cd</span> ..

<span class="c"># Now we're outside</span>
python -m top_level.main
</code></pre>
              </div>
            </li>
            <li>
              <p>Or poorly learn from the Ruby world be creating a wrapper <em>outside</em>
                <code class="highlighter-rouge">top_level/</code>:</p>
              <div class="language-python highlighter-rouge">
                <pre class="highlight"><code><span class="c"># top_level/../run-script.sh</span>

<span class="k">if</span> <span class="n">__file__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">top_level.main</span>
</code></pre>
              </div>
            </li>
          </ul>
          <p>See?  Python sucks.</p>
        </div>
        <hr class="fin" />
      </article>
      <footer>
        <div id="copyright-footer">© Ha-Duong Nguyen 2016.
    Unless clearly stated, all contents are released under the terms of
    the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">CC
    BY-SA v4.0 license</a>.</div>
      </footer>
      <div id="fine-print">
        <p>
        </p>
      </div>
    </section>
  </body>
</html>
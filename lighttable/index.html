<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LightTable experiment</title>
    <meta name="author" content="Ha-Duong Nguyen" />
    <meta name="description" content="thoughts & rants on tech & language, by cmpitg" />
    <link rel="canonical" href="http://reference-error.org//lighttable/" />
    <!-- <link href="//fonts.googleapis.com/css?family=Nunito:400,700,300|Varela+Round" rel="stylesheet" type="text/css"> -->
    <link href="//fonts.googleapis.com/css?family=Alegreya+Sans|Ubuntu+Mono" rel="stylesheet">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="alternate" type="application/rss+xml" title="Reference Error" href="/atom.xml" />
    <link rel="stylesheet" href="/css/site.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
        ga('create', ', 'auto');
        ga('send', 'pageview');
    </script>
  </head>
  <body>
    <section>
      <header class="navigation">
        <div id="header-title">
          <a href="/" class="logo" title="Reference Error">
            Reference Error
      </a>
        </div>
        <div id="social-links-header">
          <a title="cmpitg @ github" href="https://github.com/cmpitg"><i class="fa fa-github-square"></i></a>
          <a title="cmpitg @ linkedin" href="https://fi.linkedin.com/in/cmpitg"><i class="fa fa-linkedin-square"></i></a>
          <a title="cmpitg @ twitter" href="https://twitter.com/cmpitg"><i class="fa fa-twitter-square"></i></a>
        </div>
        <nav>
          <ul>
            <li><a href="/logs">logs</a></li>
            <li><a href="/writing">writing</a></li>
            <li><a href="/talks">talks</a></li>
            <li><a href="/about">about</a></li>
            <li class="no-bullet"><a href="/atom.xml">rss</a></li>
          </ul>
        </nav>
      </header>
      <article>
        <h1 class="title">
          LightTable experiment
  </h1>
        <p class="subtitle">
          <span>
            Series:
          
            
              <a href="/#editor">editor</a>,
            
          
            
              <a href="/#ide">ide</a>,
            
          
            
              <a href="/#lighttable">lighttable</a>,
            
          
            
              <a href="/#experiment">experiment</a>
          </span>
          <span class="date">
          </span>
        </p>
        <div id="post">
          <h2 id="the-lighttable-experiment">The LightTable experiment</h2>
          <h3 id="reasoning">Reasoning</h3>
          <ul>
            <li>I always want a better system than Emacs:
    
              <ul>
                <li>More beautiful</li>
                <li>Supports concurrent programming</li>
                <li>Uses a better Lisp (Clojure <strong>is</strong> a <strong>better</strong> Lisp, from my personal
view)</li>
                <li>Flexible in displaying things (like in a browser)</li>
                <li>Better code base.</li>
              </ul>
            </li>
            <li>LightTable is a great tool to experiment cool ideas:
    
              <ul>
                <li>Quick to prototype</li>
                <li>Live-experiment</li>
              </ul>
            </li>
            <li>Chris Granger is not satisfied with what we have in programming.</li>
          </ul>
          <p>So I decided to begin experimenting LightTable (LT) in all ways possible,
starting with this page.  I’ll try to keep this page as concise as helpful as
possible.</p>
          <h3 id="getting-started">Getting started</h3>
          <p>Sources:</p>
          <ul>
            <li>
              <p>LightTable’s
                <a href="https://github.com/LightTable/LightTable/blob/master/README.md">readme</a></p>
            </li>
            <li>
              <p>Basic setup:</p>
              <div class="language-sh highlighter-rouge">
                <pre class="highlight"><code><span class="c"># Install lein</span>
mkdir ~/bin
wget --no-check-certificate <span class="se">\</span>
    -O ~/bin/lein <span class="se">\</span>
    https://raw.githubusercontent.com/technomancy/leiningen/stable/bin/lein
chmod +x ~/bin/lein
<span class="nb">echo</span> <span class="s1">'export PATH=$HOME/bin:$PATH'</span> &gt;&gt; ~/.profile
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$HOME</span>/bin:<span class="nv">$PATH</span>
lein

git clone https://github.com/LightTable/LightTable.git
<span class="nb">cd </span>LightTable
./linux_deps.sh
./deploy/LightTable
</code></pre>
              </div>
            </li>
          </ul>
          <p>Basic keybinding:</p>
          <ul>
            <li>
              <p><code class="highlighter-rouge">Ctrl-Enter</code> to eval an expression</p>
            </li>
            <li>
              <p><code class="highlighter-rouge">Ctrl-O</code> to open a file</p>
            </li>
            <li>
              <p><code class="highlighter-rouge">Ctrl-.</code> to jump to definition, and</p>
              <p><code class="highlighter-rouge">Ctrl-,</code> to jump back</p>
            </li>
            <li>
              <p><code class="highlighter-rouge">Ctrl-D</code> to look up inline documentation, and</p>
              <p><code class="highlighter-rouge">Ctrl-Shift-D</code> for documentation searcher</p>
            </li>
            <li>
              <p><code class="highlighter-rouge">Ctrl-Shift-F</code> for <code class="highlighter-rouge">grep</code>-like searching</p>
            </li>
          </ul>
          <p>Basic components of LT:</p>
          <ul>
            <li>LT uses <a href="http://codemirror.net/">CodeMirror</a> for all the syntax highlighting
and editing functionalities</li>
          </ul>
          <p>Basic concepts</p>
          <ul>
            <li>
              <p>LT is organized around <strong>behaviors</strong>, <strong>objects</strong>, and <strong>tags</strong> (BOT):</p>
              <ul>
                <li>
                  <p>Read more about them
                    <a href="http://www.chris-granger.com/2013/01/24/the-ide-as-data/">here</a></p>
                </li>
                <li>
                  <p>BOT model is more or less the same as Golang’s
                    <a href="http://en.wikipedia.org/wiki/Object-oriented_programming">object-oriented programming</a>
                    (OOP) model:</p>
                  <ul>
                    <li>
                      <p><em>Object templates</em> are fundamentally classes</p>
                    </li>
                    <li>
                      <p><em>Objects</em> are simply hashtables (actually they are
                        <a href="http://clojure.org/atoms"><em>atoms</em></a> that hold hashtables)</p>
                    </li>
                    <li>
                      <p><em>Behaviors</em> are fundamentally <em>methods</em></p>
                    </li>
                    <li>
                      <p>Behaviors <em>don’t reside in objects</em></p>
                    </li>
                    <li>
                      <p>Behaviors are not called directly but rather via their <em>triggers</em>, which
act like in an event system</p>
                    </li>
                    <li>
                      <p>Which behaviors could be applied upon which objects is defined by
                        <em>tagging</em>:</p>
                      <ul>
                        <li>
                          <p>Each object has a set of <em>tags</em>, which can be added or removed</p>
                        </li>
                        <li>
                          <p>Each tag has a set of behaviors, which can also be added or removed</p>
                        </li>
                        <li>
                          <p>If a behavior belongs to a tag, which in turns belongs to an object,
that behavior could be called upon that object</p>
                        </li>
                      </ul>
                    </li>
                  </ul>
                  <p>This model:</p>
                  <ul>
                    <li>
                      <p>Is a re-implementation and a better version (IMHO) of OOP.  Actually
it’s <strong>is</strong> OOP,</p>
                    </li>
                    <li>
                      <p>Allows much more flexible type of method/behavior dispatching compared
to the poor OOP models of C++, Java, PHP, Python, …  (Have you used
                        <a href="http://en.wikipedia.org/wiki/Common_Lisp_Object_System">CLOS</a>?),</p>
                    </li>
                    <li>
                      <p>Allows adding/removing/redefining methods dynamically (just add/remove
                        <em>them from tags</em>) without any special techniques or special runtime
penalty.</p>
                    </li>
                    <li>
                      <p>Allows much better ways to instropect an object and its behaviors,</p>
                    </li>
                    <li>
                      <p>Allows much rapid development due to quick and easy ways of
introspection mentioned above.</p>
                    </li>
                    <li>
                      <p>Helps managing global states effectively.</p>
                    </li>
                  </ul>
                </li>
                <li>
                  <p>My attempt in simplifying things:</p>
                  <ul>
                    <li>
                      <p><em>Object templates</em> ~ classes,</p>
                      <p><em>Objects</em> ~ objects (class instances),</p>
                      <p><em>Behaviors</em> ~ methods</p>
                    </li>
                    <li>
                      <p>To create an <em>object template</em>:</p>
                      <div class="language-clojure highlighter-rouge">
                        <pre class="highlight"><code><span class="p">(</span><span class="nf">lt.object/object*</span><span class="w"> </span><span class="no">:shouter-template</span><span class="w">
                   </span><span class="no">:tags</span><span class="w"> </span><span class="o">#</span><span class="p">{</span><span class="no">:shouter</span><span class="p">}</span><span class="w">
                   </span><span class="no">:words</span><span class="w"> </span><span class="s">"¡Hola mundo!"</span><span class="w">
                   </span><span class="no">:init</span><span class="w"> </span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="p">[</span><span class="n">this</span><span class="p">]</span><span class="w">
                           </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="s">"&gt; A silly object is created"</span><span class="p">)))</span><span class="w">
</span></code></pre>
                      </div>
                      <p>The object template <code class="highlighter-rouge">:silly-obj-template</code> can now be used to create new
objects.</p>
                    </li>
                    <li>
                      <p>To create an object from <em>object template</em>:</p>
                      <div class="language-clojure highlighter-rouge">
                        <pre class="highlight"><code><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">shouter</span><span class="w"> </span><span class="p">(</span><span class="nf">lt.object/create</span><span class="w"> </span><span class="no">:shouter-template</span><span class="p">))</span><span class="w">
</span></code></pre>
                      </div>
                      <p><code class="highlighter-rouge">lt.object/create</code> and <code class="highlighter-rouge">lt.object/object*</code> could be combined:</p>
                      <div class="language-clojure highlighter-rouge">
                        <pre class="highlight"><code><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">loud-shouter</span><span class="w"> </span><span class="p">(</span><span class="nf">lt.object/create</span><span class="w">
                    </span><span class="p">(</span><span class="nf">lt.object/object*</span><span class="w"> </span><span class="no">:shouter-template</span><span class="w">
                                       </span><span class="no">:tags</span><span class="w"> </span><span class="o">#</span><span class="p">{</span><span class="no">:shouter</span><span class="p">}</span><span class="w">
                                       </span><span class="no">:words</span><span class="w"> </span><span class="s">"¡Hola mundo!"</span><span class="w">
                                       </span><span class="no">:init</span><span class="w"> </span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="p">[</span><span class="n">this</span><span class="p">]</span><span class="w">
                                               </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="s">"&gt; A silly object is created"</span><span class="p">)))))</span><span class="w">
</span></code></pre>
                      </div>
                      <p>This object and its siblings now can be referred to:</p>
                      <ul>
                        <li>
                          <p>By their tag:</p>
                          <div class="language-clojure highlighter-rouge">
                            <pre class="highlight"><code><span class="p">(</span><span class="nf">lt.object/by-tag</span><span class="w"> </span><span class="no">:shouter</span><span class="p">)</span><span class="w">                     </span><span class="c1">;; Returns a list of objects
</span></code></pre>
                          </div>
                        </li>
                        <li>
                          <p>By their ID (NOT recommended, since object IDS are only valid within a
session):</p>
                          <div class="language-clojure highlighter-rouge">
                            <pre class="highlight"><code><span class="p">(</span><span class="nf">lt.object/by-id</span><span class="w"> </span><span class="mi">104</span><span class="p">)</span><span class="w">                           </span><span class="c1">;; Returns the object
</span></code></pre>
                          </div>
                        </li>
                        <li>
                          <p>Or by their type:</p>
                          <div class="language-clojure highlighter-rouge">
                            <pre class="highlight"><code><span class="p">(</span><span class="nf">lt.object/instances-by-type</span><span class="w"> </span><span class="no">:shouter-template</span><span class="p">)</span><span class="w"> </span><span class="c1">;; Returns a list of objects
</span></code></pre>
                          </div>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <p>To create a behavior, use <code class="highlighter-rouge">lt.macros/behavior</code>:</p>
                      <div class="language-clojure highlighter-rouge">
                        <pre class="highlight"><code><span class="p">(</span><span class="nf">lt.macros/behavior</span><span class="w"> </span><span class="no">:shout</span><span class="w">
                    </span><span class="no">:triggers</span><span class="w"> </span><span class="o">#</span><span class="p">{</span><span class="no">:do-shout</span><span class="p">}</span><span class="w">
                    </span><span class="no">:reaction</span><span class="w"> </span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="p">[</span><span class="n">this</span><span class="p">]</span><span class="w">
                                </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">words</span><span class="w"> </span><span class="p">(</span><span class="nb">str</span><span class="w"> </span><span class="p">(</span><span class="no">:words</span><span class="w"> </span><span class="err">@</span><span class="n">this</span><span class="p">)</span><span class="w"> </span><span class="s">"!!!"</span><span class="p">)]</span><span class="w">
                                  </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="n">words</span><span class="p">)</span><span class="w">
                                  </span><span class="n">words</span><span class="p">)))</span><span class="w">

</span><span class="p">(</span><span class="nf">lt.macros/behavior</span><span class="w"> </span><span class="no">:greet-then-shout</span><span class="w">
                    </span><span class="no">:triggers</span><span class="w"> </span><span class="o">#</span><span class="p">{</span><span class="no">:do-greet-then-shout</span><span class="p">}</span><span class="w">
                    </span><span class="no">:reaction</span><span class="w"> </span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="p">[</span><span class="n">this</span><span class="p">]</span><span class="w">
                                </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">words</span><span class="w"> </span><span class="p">(</span><span class="nb">str</span><span class="w"> </span><span class="s">"Hola, "</span><span class="w">
                                                 </span><span class="p">(</span><span class="no">:words</span><span class="w"> </span><span class="err">@</span><span class="n">this</span><span class="p">)</span><span class="w">
                                                 </span><span class="s">"!!!"</span><span class="p">)]</span><span class="w">
                                  </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="n">words</span><span class="p">)</span><span class="w">
                                  </span><span class="n">words</span><span class="p">)))</span><span class="w">
</span></code></pre>
                      </div>
                      <p>Behaviors can then be retrieved using <code class="highlighter-rouge">lt.object/-&gt;behavior</code>:</p>
                      <div class="language-clojure highlighter-rouge">
                        <pre class="highlight"><code><span class="p">(</span><span class="nf">lt.object/-&gt;behavior</span><span class="w"> </span><span class="no">:shout</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="nf">lt.object/-&gt;behavior</span><span class="w"> </span><span class="no">:greet-then-shout</span><span class="p">)</span><span class="w">
</span></code></pre>
                      </div>
                    </li>
                    <li>
                      <p>To add behaviors to an object, there are several ways:</p>
                      <ol>
                        <li>
                          <p>Add a <em>tag</em> (a Clojure’s
                            <a href="http://clojure.org/data_structures#Data%20Structures-Keywords">keyword</a>)
to the <em>object</em>, then add behaviors to that tag.</p>
                          <p>E.g.</p>
                          <div class="language-clojure highlighter-rouge">
                            <pre class="highlight"><code><span class="c1">;; Add tag to object
</span><span class="p">(</span><span class="nf">lt.object/add-tags</span><span class="w"> </span><span class="n">shouter</span><span class="w"> </span><span class="p">[</span><span class="no">:throwaway-tag</span><span class="p">])</span><span class="w">

</span><span class="c1">;; Tag behaviors
</span><span class="p">(</span><span class="nf">lt.object/tag-behaviors</span><span class="w"> </span><span class="no">:throwaway-tag</span><span class="w"> </span><span class="no">:shout</span><span class="p">)</span><span class="w">
</span></code></pre>
                          </div>
                        </li>
                        <li>
                          <p>Add behavior directly:</p>
                          <div class="language-clojure highlighter-rouge">
                            <pre class="highlight"><code><span class="p">(</span><span class="nf">lt.object/add-behavior!</span><span class="w"> </span><span class="n">shouter</span><span class="w"> </span><span class="no">:greet-then-shout</span><span class="p">)</span><span class="w">
</span></code></pre>
                          </div>
                        </li>
                      </ol>
                    </li>
                    <li>
                      <p>To call a behavior upon an object:</p>
                      <ul>
                        <li></li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>
                  <p>Some constraints:</p>
                  <ul>
                    <li><em>Tags</em> can be added to <em>objects</em> only.  Adding tags to <em>object
templates</em> will not change their instances’ <em>tags</em>.</li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
          <h2 id="tips-and-tricks">Tips and tricks</h2>
        </div>
        <hr class="fin" />
      </article>
      <footer>
        <div id="copyright-footer">© Ha-Duong Nguyen 2016.
    Unless clearly stated, all contents are released under the terms of
    the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">CC
    BY-SA v4.0 license</a>.</div>
      </footer>
      <div id="fine-print">
        <p>
        </p>
      </div>
    </section>
  </body>
</html>